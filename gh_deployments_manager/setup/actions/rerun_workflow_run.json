{
  "identifier": "rerun_workflow_run",
  "title": "Re-run Workflow Run",
  "icon": "Pipeline",
  "description": "Re-run failed or cancelled workflow runs",
  "trigger": {
    "type": "self-service",
    "operation": "DAY-2",
    "userInputs": {
      "properties": {},
      "required": [],
      "order": []
    },
    "condition": {
      "type": "SEARCH",
      "rules": [
        {
          "property": "conclusion",
          "operator": "in",
          "value": [
            "failure",
            "cancelled"
          ]
        }
      ],
      "combinator": "and"
    },
    "blueprintIdentifier": "githubWorkflowRun"
  },
  "invocationMethod": {
    "type": "WEBHOOK",
    "url": "https://api.github.com/repos/{{WORKFLOW_REPO}}/{{ .entity.identifier | split(\"/\")[0] }}/actions/runs/{{ .entity.identifier | split(\"/\")[-1] }}/rerun-failed-jobs",
    "agent": false,
    "synchronized": true,
    "method": "POST",
    "headers": {
      "Accept": "application/vnd.github+json",
      "Authorization": "Bearer {{ .secrets._GITHUB_TOKEN }}",
      "X-GitHub-Api-Version": "2022-11-28"
    }
  },
  "requiredApproval": false
}
